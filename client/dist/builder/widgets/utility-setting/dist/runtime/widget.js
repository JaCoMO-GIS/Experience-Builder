System.register(["jimu-core","jimu-for-builder","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/basic/item-selector"],(function(e,t){var a={},l={},i={},s={},n={};return{setters:[function(e){a.Immutable=e.Immutable,a.React=e.React,a.ReactRedux=e.ReactRedux,a.UtilityManager=e.UtilityManager,a.classNames=e.classNames,a.css=e.css,a.jsx=e.jsx,a.polished=e.polished},function(e){l.getAppConfigAction=e.getAppConfigAction},function(e){i.Button=e.Button,i.Checkbox=e.Checkbox,i.Dropdown=e.Dropdown,i.DropdownItem=e.DropdownItem,i.DropdownMenu=e.DropdownMenu,i.DropdownToggle=e.DropdownToggle,i.Icon=e.Icon,i.Label=e.Label,i.Link=e.Link,i.Loading=e.Loading,i.LoadingType=e.LoadingType,i.Modal=e.Modal,i.ModalBody=e.ModalBody,i.ModalFooter=e.ModalFooter,i.ModalHeader=e.ModalHeader,i.SVG=e.SVG,i.Tab=e.Tab,i.Tabs=e.Tabs,i.TextInput=e.TextInput,i.hooks=e.hooks},function(e){s.AddUtilityTabs=e.AddUtilityTabs,s.SidePopper=e.SidePopper},function(e){n.ItemDetail=e.ItemDetail}],execute:function(){e((()=>{var e={7906:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2a1 1 0 0 1 1-1h10a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1ZM0 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6Zm6.66.062c1.1-.202 2.043.09 2.829.876a3.22 3.22 0 0 1 .688 3.532l1.587 1.588a.805.805 0 0 1 0 1.137l-.569.57a.805.805 0 0 1-1.137 0L8.47 12.176a3.22 3.22 0 0 1-3.532-.688c-.786-.786-1.078-1.728-.876-2.829a.402.402 0 0 1 .68-.212l1.618 1.619a.402.402 0 0 0 .569 0l1.138-1.138a.402.402 0 0 0 0-.569L6.448 6.742a.402.402 0 0 1 .212-.68Z" fill="#000"></path></svg>'},1167:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2V4a2 2 0 0 1 2-2h8a2 2 0 0 0-2-2H2Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm5.489 2.938c-.786-.786-1.728-1.078-2.829-.876a.402.402 0 0 0-.212.68l1.619 1.618a.402.402 0 0 1 0 .569l-1.138 1.138a.402.402 0 0 1-.569 0L6.742 8.448a.402.402 0 0 0-.68.212c-.202 1.1.09 2.043.876 2.829a3.22 3.22 0 0 0 3.532.688l1.588 1.587a.805.805 0 0 0 1.137 0l.57-.569a.805.805 0 0 0 0-1.137l-1.588-1.588a3.22 3.22 0 0 0-.688-3.532Z" fill="#000"></path></svg>'},3372:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4.751a2 2 0 0 0-.495-1.317L12.098.683A2 2 0 0 0 10.592 0H3Zm3.325 3.077c1.376-.252 2.554.114 3.536 1.095a4.024 4.024 0 0 1 .86 4.416l1.985 1.984c.392.393.392 1.03 0 1.422l-.712.712a1.006 1.006 0 0 1-1.422 0L8.588 10.72a4.024 4.024 0 0 1-4.416-.86c-.981-.982-1.347-2.16-1.095-3.536a.503.503 0 0 1 .85-.265L5.95 8.083a.503.503 0 0 0 .711 0l1.422-1.422a.503.503 0 0 0 0-.71L6.06 3.926a.503.503 0 0 1 .265-.85Z" fill="#000"></path></svg>'},687:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.667 4.667 11.333 0 16 4.667l-4.667 4.666-4.666-4.666ZM0 1.333V8h6.667V1.333H0ZM6.667 16H0V9.333h6.667V16ZM8 16V9.333h6.667V16H8Z" fill="#000"></path></svg>'},3982:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0V1.5Zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062Zm-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643L3.176 2.436ZM6.244 10.6H5.43h.814ZM.961 9.8h4.88c.211 0 .359.19.359.4a1.8 1.8 0 0 0 3.555.4h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755c.03-.129.045-.263.045-.4 0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228L.961 9.8Zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356h9.544Z" fill="#000"></path></svg>'},2640:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.29 6.208 8 1 .71 6.208a.5.5 0 1 0 .58.813L2 6.515V15h12V6.514l.71.507a.5.5 0 0 0 .58-.813ZM13 5.8 8 2.229 3 5.8V14h3v-4h4v4h3V5.8ZM9 14H7v-3h2v3Z" fill="#000"></path></svg>'},5369:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z" fill="#000"></path></svg>'},4750:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5Z" fill="#000"></path></svg>'},8450:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 1a2 2 0 0 1 2 2v6.5a.5.5 0 0 1-1 0V3a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h6.5a.5.5 0 0 1 0 1H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10Zm-1.849 10.151a.517.517 0 0 1 .73 0l2.923 2.923a.517.517 0 0 1-.73.73l-2.923-2.922a.517.517 0 0 1 0-.73ZM8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm0-1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill="#000"></path></svg>'},224:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Zm-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707l-4.137-4.137Z" fill="#000"></path></svg>'},8866:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16Zm0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14Z" fill="#000"></path></svg>'},8891:e=>{"use strict";e.exports=a},3137:e=>{"use strict";e.exports=l},726:e=>{"use strict";e.exports=i},7756:e=>{"use strict";e.exports=s},878:e=>{"use strict";e.exports=n}},t={};function o(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var r={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(r),o.d(r,{default:()=>ee});var e=o(8891),t=o(726),a=o(4750),l=o.n(a);const i=a=>{const{className:i}=a,s=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",i);return e.React.createElement(t.SVG,Object.assign({className:n,src:l()},s))};var s=o(224),n=o.n(s);const c=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:n()},i))};var d=o(3982),u=o.n(d);const p=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:u()},i))};var m=o(3137),g=o(7756);const x={utilityService:"Utility service",noUtilityTip:"No utility in the experience.<br/>Please add your utilities."};var v=o(687),y=o.n(v);const f=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:y()},i))};var b=o(5369),h=o.n(b);const j=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:h()},i))};function w(a){const{widgetId:l,className:i=""}=a,s=e.ReactRedux.useSelector((e=>{var t,a,i;return null===(i=(null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.widgets)[l])||void 0===i?void 0:i.icon})),n=e.ReactRedux.useSelector((e=>{var t,a,i;return null===(i=(null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.widgets)[l])||void 0===i?void 0:i.label}));return(0,e.jsx)("div",{className:`d-flex align-items-center ${i}`},(0,e.jsx)(t.Icon,{icon:s,size:16}),(0,e.jsx)("span",{className:"ml-1"},n))}function N(a){const{utilityId:l,label:i,relatedWidgetIds:s,onCancel:n,afterRemove:o}=a,[r,c]=e.React.useState((0,e.Immutable)({})),d=t.hooks.useTranslate(),u=e.React.useCallback(((e,t)=>{c(r.set(e,t))}),[r]),p=e.React.useCallback((()=>{const e=(0,m.getAppConfigAction)(),t=Object.keys(r).filter((e=>r[e])),a=s.filter((e=>!r[e]));t.forEach((t=>{e.removeWidget(t)})),a.forEach((t=>{const a=e.appConfig.widgets[t].useUtilities.filter((e=>e.utilityId!==l));e.editWidgetProperty(t,"useUtilities",a)})),e.removeUtility(l),e.exec(),o()}),[r,s,l,o]);return(0,e.jsx)(t.Modal,{isOpen:!0,className:"bg-light-300 d-flex justify-content-between",role:"dialog","aria-label":"Remove utility","aria-describedby":`${l}_desc`},(0,e.jsx)(t.ModalHeader,{className:"d-flex justify-content-between border-color-gray-300 py-3 font-16 font-dark-600",title:"Remove utility"},"Remove utility"),(0,e.jsx)(t.ModalBody,{id:`${l}_desc`},(0,e.jsx)("div",{className:"px-2 py-0"},(0,e.jsx)("p",{className:"font-13 font-dark-600"},"You are removing utility:"),(0,e.jsx)("p",{className:"font-14 font-dark-800 mt-3"},i),(0,e.jsx)("p",{className:"font-13 font-dark-600 mt-3"},"This utility is used in the following widgets and removing it may break them."),(0,e.jsx)("div",{role:"group","aria-label":d("relatedWidgets")},(0,e.jsx)("p",{className:"font-14 font-dark-400 mt-3"},d("relatedWidgets")),(0,e.jsx)("div",{className:"related-widgets px-2 py-3"},(0,e.jsx)("div",null,s.map((a=>{var l;return(0,e.jsx)(t.Label,{key:a,className:"d-flex align-items-center"},(0,e.jsx)(t.Checkbox,{className:"mr-2 font-13",onChange:(e,t)=>u(a,t),checked:null!==(l=r[a])&&void 0!==l&&l}),(0,e.jsx)(w,{widgetId:a}))}))))),(0,e.jsx)("p",{className:"font-13 font-dark-600 mt-2 mb-0"},"Select the widgets you want to delete alongside the utility. Be aware they will be removed from all devices views. The unselected widgets will be kept and you can reconfigure them later."))),(0,e.jsx)(t.ModalFooter,null,(0,e.jsx)("div",{className:"d-flex justify-content-end mt-10"},(0,e.jsx)(t.Button,{type:"primary",className:"mr-2",onClick:p,"aria-label":"Remove utility"},"Remove utility"),(0,e.jsx)(t.Button,{type:"default",onClick:n,"aria-label":d("cancel")},d("cancel")))))}function O(a){const{onRename:l,afterRemove:i,utilityId:s,label:n,relatedWidgetIds:o}=a,[r,c]=e.React.useState(!1),d=t.hooks.useTranslate(x),u=e.React.useCallback((()=>{if((null==o?void 0:o.length)>0)return void c(!0);const e=(0,m.getAppConfigAction)();e.removeUtility(s),e.exec(),null==i||i()}),[o,s,i]),p=t.hooks.useEventCallback((()=>{c(!1)}));return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(t.Dropdown,{className:"utility-more",direction:"down",size:"sm"},(0,e.jsx)(t.DropdownToggle,{icon:!0,size:"sm","aria-label":d("more"),type:"tertiary"},(0,e.jsx)(j,{className:"align-baseline",size:"m"})),(0,e.jsx)(t.DropdownMenu,null,(0,e.jsx)(t.DropdownItem,{header:!1,"aria-label":d("rename"),onClick:l},d("rename")),(0,e.jsx)(t.DropdownItem,{header:!1,"aria-label":d("remove"),onClick:u},d("remove")))),r&&(0,e.jsx)(N,{utilityId:s,label:n,relatedWidgetIds:o,onCancel:p,afterRemove:p}))}function k(a){const{text:l,isEditing:i,className:s,onChange:n}=a,[o,r]=e.React.useState(null!=l?l:""),c=e.React.useCallback((e=>{const t=e.target.value;n(t)}),[n]),d=t.hooks.useEventCallback((e=>{r(e.target.value)})),u=t.hooks.useEventCallback((e=>{e.stopPropagation()}));return i?e.React.createElement(t.TextInput,{className:(0,e.classNames)(s,"text-truncate p-1"),onBlur:c,onKeyUp:c,onChange:d,value:o,onClick:u}):e.React.createElement("div",{className:s},o)}var R=o(7906),S=o.n(R);const C=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:S()},i))};var I=o(1167),M=o.n(I);const P=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:M()},i))};var E=o(3372),V=o.n(E);const Z=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:V()},i))};var B=o(8450),T=o.n(B);const z=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:T()},i))};function L(t){const a=e.ReactRedux.useSelector((e=>{var a,l;const i=[],s=null===(l=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appConfig)||void 0===l?void 0:l.widgets;return Object.keys(null!=s?s:{}).forEach((e=>{var a;(null===(a=s[e].useUtilities)||void 0===a?void 0:a.some((e=>e.utilityId===t)))&&i.push(e)})),i.sort(),i.join(",")}));return e.React.useMemo((()=>a.length>0?a.split(","):[]),[a])}const U=e.css`
  background-color: var(--light-500);
  font-size: ${e.polished.rem(12)};
  border-radius: 2px;
  padding: 0;
  position: relative;
  &:hover{
    background-color: var(--light-600);
  }
  .loading-container{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
  }
  .utility-card-header{
    width: 100%;
    height: ${e.polished.rem(38)};
    padding: 0 10px;
    background-color: var(--light-700);
  }
  .utility-card-body{
    width: 100%;
    height: 100%;
    padding: 14px 10px 6px 10px;
  }
  .utility-card-footer {
    padding: 12px;
    display: flex;
  }
  .two-line-truncate{
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    word-break: break-word;
    word-wrap: break-word;
  }
  .utility-more{
    margin-right: ${e.polished.rem(-8)};
  }
  .utility-label{
    font-size: ${e.polished.rem(14)};
    color: var(--dark-800);
  }
  .utility-type{
    font-size: ${e.polished.rem(13)};
    color: var(--dark-800);
    max-width: ${e.polished.rem(160)};
  }
  .utility-related-widgets, .utility-child-dss{
    font-size: ${e.polished.rem(13)};
  }
  .warning-icon, .warning-icon>*{
    color: var(--danger-700);
    fill: var(--danger-700);
  }
`;function H(a){const{utilityJson:l,intl:i,onClick:s}=a,n=L(l.id),[o,r]=e.React.useState(!1),[c,d]=e.React.useState(!1),[u,p]=e.React.useState(null),[g,x]=e.React.useState(null);t.hooks.useEffectOnce((()=>{l.portalUrl&&l.itemId&&(d(!0),e.UtilityManager.getInstance().getUtility(l.id).then((e=>{p(e.itemInfo),e.tasks&&x(e.tasks)})).finally((()=>{d(!1)})))}));const v=e.React.useCallback((e=>{const t=(0,m.getAppConfigAction)();let a=t.appConfig.utilities;a=a.setIn([l.id,"label"],e),t.updateUtilities(a).exec(),r(!1)}),[l]),y=t.hooks.useEventCallback((()=>{r(!0)})),b=e.React.useCallback((e=>{(l.itemId&&u||!l.itemId)&&s(l.id,e,u,g)}),[s,l.id,l.itemId,u,g]);return(0,e.jsx)("div",{className:"utility-card m-3",css:U},c&&(0,e.jsx)("div",{className:"loading-container"},(0,e.jsx)(t.Loading,{type:t.LoadingType.Bar})),(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center utility-card-header"},(0,e.jsx)("div",{className:"d-flex align-items-center w-100",title:""},(0,e.jsx)("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 utility-thumbnail"},(null==g?void 0:g.length)>1?(0,e.jsx)(P,{size:"s",color:"var(--white)"}):(0,e.jsx)(Z,{size:"s",color:"var(--white)"})),(0,e.jsx)("div",{className:"flex-grow-1 text-truncate pl-2 utility-type"},(0,e.jsx)("div",{className:"text-truncate utility-type-name"},l.type))),(0,e.jsx)("div",{className:"d-flex"},(0,e.jsx)(O,{utilityId:l.id,label:l.label,relatedWidgetIds:n,onRename:y}))),(0,e.jsx)("div",{className:"utility-card-body"},(0,e.jsx)(k,{text:l.label,isEditing:o,onChange:v,className:o?"flex-grow-1 utility-label utility-label-input":"flex-grow-1 two-line-truncate utility-label text-left"})),(0,e.jsx)("div",{className:"utility-card-footer mt-3"},(null==g?void 0:g.length)>1&&(0,e.jsx)(t.Button,{type:"tertiary",className:"p-0 mr-3 utility-tasks align-items-center",onClick:()=>b(0)},(0,e.jsx)(C,{size:"s",className:"mr-1"}),(0,e.jsx)("span",{className:"align-middle"},g.length)),(0,e.jsx)(t.Button,{type:"tertiary",className:"p-0 utility-related-widgets align-items-center",title:i.formatMessage({id:"relatedWidgetsWithDirectlyNum"},{num:0}),onClick:()=>b(1)},(0,e.jsx)(f,{size:"s",className:"mr-1"}),(0,e.jsx)("span",{className:"align-middle"},n.length)),(0,e.jsx)(t.Button,{type:"tertiary",className:"p-0 ml-auto utility-preview",onClick:()=>b(0)},(0,e.jsx)(z,{size:"s"}))))}const A=e.css`
  .title{
    padding: 18px 16px 2px 16px !important;
    font-size: 1rem;
    font-weight: 500;
    color: var(--dark-600);
    .search-icon{
      cursor: pointer;
      width: 30px;
    }
  }

  .add-utility{
    height: ${e.polished.rem(30)};
    line-height: ${e.polished.rem(30)};
    width: 228px;
    padding: 0;
    border-radius: 2px;
    cursor: pointer;
    .add-utility-label{
      max-width: 85%;
    }
  }
  button.add-utility:hover{
    color: var(--black) !important;
  }
`;function D(a){const{intl:l,onCardClick:s}=a,n=e.React.useRef(),[o,r]=e.React.useState(!1),d=e.ReactRedux.useSelector((t=>{var a,l,i;return null!==(i=null===(l=null===(a=t.appStateInBuilder)||void 0===a?void 0:a.appConfig)||void 0===l?void 0:l.utilities)&&void 0!==i?i:(0,e.Immutable)({})})),u=e.React.useMemo((()=>Object.keys(d).filter((e=>"org"!==d[e].source))),[d]),v=e.React.useCallback((()=>{r(!o)}),[o]),y=e=>l.formatMessage({id:e,defaultMessage:x[e]}),f=t.hooks.useEventCallback((e=>{(0,m.getAppConfigAction)().updateUtilities(e).exec()})),b=e.React.useCallback(((e,t,a,l)=>{s(d[e],t,a,l)}),[d,s]);return(0,e.jsx)("div",{css:A,className:"jimu-widget widget-utility-setting setting-pane bg-light-300",ref:n},(0,e.jsx)("div",{className:"h-100"},(0,e.jsx)("div",{className:"jimu-builder-panel--header title d-flex flex-row text-data-600 title justify-content-between"},(0,e.jsx)("div",{className:"mb-0 text-truncate text-left"},y("utilityService")),(0,e.jsx)("div",{className:"search-icon d-flex align-items-start justify-content-end",title:y("search")},(0,e.jsx)(t.Button,{size:"sm",icon:!0,type:"tertiary","aria-label":y("search")},(0,e.jsx)(c,{size:"m"})))),(0,e.jsx)("div",{className:"d-flex mx-3 mb-1 mt-3"},(0,e.jsx)(t.Button,{type:"primary",className:"flex-grow-1 text-center add-utility","aria-label":y("addUtility"),onClick:v},(0,e.jsx)("div",{className:"w-100 px-2 d-flex align-items-center justify-content-center"},(0,e.jsx)(i,{size:"m"}),(0,e.jsx)("div",{className:"add-utility-label text-truncate"},y("addUtility"))))),0===u.length&&(0,e.jsx)("div",{className:"empty-placeholder w-100"},(0,e.jsx)("div",{className:"empty-placeholder-icon"},(0,e.jsx)(p,{size:48})),(0,e.jsx)("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:y("noUtilityTip")}})),(0,e.jsx)("div",{css:e.css`height: calc(100% - 100px); overflow: auto;`},u.map((t=>(0,e.jsx)(H,{key:t,utilityJson:d[t],intl:l,onClick:b}))))),(0,e.jsx)(g.SidePopper,{title:y("addUtility"),position:"left",isOpen:o,toggle:v,trigger:n.current},(0,e.jsx)(g.AddUtilityTabs,{utilities:d,onChange:f})))}var $=o(2640),G=o.n($);const W=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:G()},i))};var _=o(878),F=o(8866),J=o.n(F);const K=a=>{const{className:l}=a,i=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)t.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(a[l[i]]=e[l[i]])}return a}(a,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",l);return e.React.createElement(t.SVG,Object.assign({className:s,src:J()},i))};function Y(a){const{widgetIdList:l,isInTab:i=!1}=a,s=t.hooks.useTranslate();return 0===l.length?(0,e.jsx)("div",{className:"empty-placeholder w-100"},(0,e.jsx)("div",{className:"empty-placeholder-icon"},(0,e.jsx)(p,{size:48})),(0,e.jsx)("div",{className:"empty-placeholder-text"},s("noRelatedWidget"))):(0,e.jsx)("div",{className:(0,e.classNames)("related-widgets",{"p-2":!i})},!i&&(0,e.jsx)("div",{css:e.css`font-size: 14px; line-height: 19px;`},s("relatedWidgets")),a.widgetIdList.map((t=>(0,e.jsx)(w,{key:t,widgetId:t,className:"mt-2 p-1"}))))}const q=e.css`
  .nav {
    border-bottom: 1px solid var(--light-300);
  }
  .utility-relations {
    border-top: 1px solid var(--light-800);
  }
  /* .utility-label.link {
    color: var(--primary-700);
  } */
`;function Q(a){const{utilityJson:l,intl:i,item:s,tasks:n,onNavBack:o,defaultTab:r=0}=a,[c,d]=e.React.useState(!1),[u,p]=e.React.useState(!1),x=e.React.useRef(),v=L(l.id),y=t.hooks.useEventCallback((()=>{d(!0)})),f=e.React.useCallback((e=>{const t=(0,m.getAppConfigAction)();let a=t.appConfig.utilities;a=a.setIn([l.id,"label"],e),t.updateUtilities(a).exec(),d(!1)}),[l]),b=e.React.useCallback((()=>{p(!u)}),[u]);return(0,e.jsx)("div",{className:"card-detail",css:q,ref:x},(0,e.jsx)("div",{className:"nav"},(0,e.jsx)(t.Button,{icon:!0,size:"sm",type:"tertiary"},(0,e.jsx)(W,{size:"s",color:"var(--primary)",onClick:o})),"/",l.label),(0,e.jsx)("div",{className:"d-flex m-2 justify-content-between align-items-center utility-detail-header"},(0,e.jsx)("div",{className:"d-flex align-items-center w-100"},(0,e.jsx)("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 utility-thumbnail"},(null==n?void 0:n.length)>1?(0,e.jsx)(P,{size:"s",color:"var(--white)"}):(0,e.jsx)(Z,{size:"s",color:"var(--white)"})),(0,e.jsx)("div",{className:"flex-grow-1 text-truncate pl-2 utility-type"},(0,e.jsx)("div",{className:"text-truncate utility-type-name"},l.type))),(0,e.jsx)("div",{className:"d-flex"},s&&(0,e.jsx)(t.Button,{icon:!0,size:"sm",type:"tertiary",onClick:b},(0,e.jsx)(K,{size:"s"})),(0,e.jsx)(O,{utilityId:l.id,label:l.label,relatedWidgetIds:v,onRename:y,afterRemove:o}))),(0,e.jsx)("div",{className:"utility-detail-body"},s&&(0,e.jsx)(t.Link,{to:c?null:s.url,className:(0,e.classNames)("p-0 utility-label-link d-flex",{"text-decoration-none":c}),themeStyle:{type:"link"},target:"_blank"},(0,e.jsx)(k,{text:l.label,isEditing:c,onChange:f,className:c?"flex-grow-1 m-2 utility-label utility-label-input":"flex-grow-1 m-2 two-line-truncate utility-label text-left"})),!s&&(0,e.jsx)(k,{text:l.label,isEditing:c,onChange:f,className:c?"flex-grow-1 m-2 utility-label utility-label-input":"flex-grow-1 m-2 two-line-truncate utility-label text-left"}),(null==n?void 0:n.length)>1&&(0,e.jsx)("div",{className:"pt-2 utility-relations"},(0,e.jsx)(t.Tabs,{className:"px-2 h-100",type:"pills",fill:!0,defaultValue:0===r?"tasks":"widgets"},(0,e.jsx)(t.Tab,{id:"tasks",title:i.formatMessage({id:"tasks"})},n.map((t=>(0,e.jsx)("div",{key:t,className:"d-flex mt-2 task-item p-1 align-items-center"},(0,e.jsx)(C,{size:"s",className:"flex-shrink-0"}),(0,e.jsx)("div",{className:"text-truncate ml-1",title:t},t),(0,e.jsx)("a",{className:"ml-auto flex-shrink-0",href:`${s.url}/${t}`,target:"_blank"},(0,e.jsx)(z,{size:"s",color:"var(--black)"})))))),(0,e.jsx)(t.Tab,{id:"widgets",title:i.formatMessage({id:"widgets"})},(0,e.jsx)(Y,{widgetIdList:v,isInTab:!0})))),(null==n||n.length<=1)&&(0,e.jsx)("div",{className:"utility-relations"},(0,e.jsx)(Y,{widgetIdList:v}))),s&&(0,e.jsx)(g.SidePopper,{title:l.label,position:"left",isOpen:u,toggle:b,trigger:x.current},(0,e.jsx)(_.ItemDetail,{item:s,portalUrl:l.portalUrl})))}const X=e.css`
  .utility-thumbnail{
    width:  ${e.polished.rem(18)};
    height:  ${e.polished.rem(18)};
    background-color: var(--info-400);
  }
  .empty-placeholder{
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    .empty-placeholder-text, .empty-placeholder-icon{
      display: table;
      margin: 0 auto;
    }
    .empty-placeholder-text{
      color: var(--dark-400);
      font-size: ${e.polished.rem(14)};
      margin-top: 16px;
      text-align: center;
    }
    .empty-placeholder-icon{
      color: var(--secondary-800);
    }
  }
`;function ee(a){const{intl:l}=a,[i,s]=e.React.useState(0),[n,o]=e.React.useState(0),[r,c]=e.React.useState(null),d=e.React.useCallback(((e,t,a,l)=>{c({utility:e,item:a,tasks:l}),o(t),s(1)}),[]),u=t.hooks.useEventCallback((()=>{s(0)}));return(0,e.jsx)("div",{css:X,className:"jimu-widget widget-utility-setting setting-pane bg-light-300"},(0,e.jsx)("div",{className:(0,e.classNames)("w-100 h-100",{"d-none":0!==i})},(0,e.jsx)(D,{intl:l,onCardClick:d})),1===i&&(0,e.jsx)(Q,{intl:l,utilityJson:r.utility,item:r.item,tasks:r.tasks,onNavBack:u,defaultTab:n}))}})(),r})())}}}));